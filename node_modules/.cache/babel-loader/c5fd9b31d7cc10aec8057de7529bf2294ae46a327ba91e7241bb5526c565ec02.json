{"ast":null,"code":"var _jsxFileName = \"/Users/chaenniee/Documents/team10-web/toyproject/src/components/selectSubject/SubjectList.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport styles from './SubjectList.module.scss';\nimport { useSessionContext } from '../../context/SessionContext';\nimport { apiEnrollClass } from '../../lib/api';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SubjectList(_ref) {\n  _s();\n  let {\n    classId,\n    name,\n    professor,\n    isEnrolled\n  } = _ref;\n  const {\n    token,\n    user,\n    setUser,\n    refreshUserInfo\n  } = useSessionContext();\n  const [subjectEnrolled, setSubjectEnrolled] = useState(isEnrolled);\n  const enroll = (token, classId) => {\n    apiEnrollClass(token, classId).then(r => {\n      toast('신청되었습니다!');\n      // setUser({...user, classes: r.data.classes})\n    }).then(r => {\n      setSubjectEnrolled(prev => !prev);\n      refreshUserInfo(token); //!를 삽입함으로서 token이 항상 존재한다는 걸 알릴 수 있다.\n    }).catch(r => console.log(r));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.wrapper,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.name,\n      children: name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.professor,\n      children: professor\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.enroll,\n      children: subjectEnrolled ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\uC218\\uAC15\\uC911\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          enroll(token, classId);\n        },\n        children: \"\\uC218\\uAC15\\uC2E0\\uCCAD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n}\n_s(SubjectList, \"KDs2ruXWERd+7Rvc2grk8B/oVuk=\", false, function () {\n  return [useSessionContext];\n});\n_c = SubjectList;\nvar _c;\n$RefreshReg$(_c, \"SubjectList\");","map":{"version":3,"names":["React","useState","styles","useSessionContext","apiEnrollClass","toast","SubjectList","classId","name","professor","isEnrolled","token","user","setUser","refreshUserInfo","subjectEnrolled","setSubjectEnrolled","enroll","then","r","prev","catch","console","log","wrapper"],"sources":["/Users/chaenniee/Documents/team10-web/toyproject/src/components/selectSubject/SubjectList.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport styles from './SubjectList.module.scss';\nimport { useSessionContext } from '../../context/SessionContext';\nimport { apiEnrollClass } from '../../lib/api';\nimport { toast } from 'react-toastify';\n\ntype SubjectListType = {\n  classId: number;\n  name: string;\n  professor: string;\n  isEnrolled: boolean | undefined;\n};\n\nexport default function SubjectList({\n  classId,\n  name,\n  professor,\n  isEnrolled,\n}: SubjectListType) {\n  const { token, user, setUser, refreshUserInfo } = useSessionContext();\n  const [subjectEnrolled, setSubjectEnrolled] = useState(isEnrolled);\n  const enroll = (token: string | null, classId: number) => {\n    apiEnrollClass(token, classId)\n      .then((r) => {\n        toast('신청되었습니다!');\n        // setUser({...user, classes: r.data.classes})\n      })\n      .then((r) => {\n        setSubjectEnrolled((prev) => !prev);\n        refreshUserInfo(token!); //!를 삽입함으로서 token이 항상 존재한다는 걸 알릴 수 있다.\n      })\n      .catch((r) => console.log(r));\n  };\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={styles.name}>{name}</div>\n      <div className={styles.professor}>{professor}</div>\n      <div className={styles.enroll}>\n        {subjectEnrolled ? (\n          <p>수강중</p>\n        ) : (\n          <button\n            onClick={() => {\n              enroll(token, classId);\n            }}\n          >\n            수강신청\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAeC,QAAQ,QAAQ,OAAO;AAClD,OAAOC,MAAM,MAAM,2BAA2B;AAC9C,SAASC,iBAAiB,QAAQ,8BAA8B;AAChE,SAASC,cAAc,QAAQ,eAAe;AAC9C,SAASC,KAAK,QAAQ,gBAAgB;AAAC;AASvC,eAAe,SAASC,WAAW,OAKf;EAAA;EAAA,IALgB;IAClCC,OAAO;IACPC,IAAI;IACJC,SAAS;IACTC;EACe,CAAC;EAChB,MAAM;IAAEC,KAAK;IAAEC,IAAI;IAAEC,OAAO;IAAEC;EAAgB,CAAC,GAAGX,iBAAiB,EAAE;EACrE,MAAM,CAACY,eAAe,EAAEC,kBAAkB,CAAC,GAAGf,QAAQ,CAACS,UAAU,CAAC;EAClE,MAAMO,MAAM,GAAG,CAACN,KAAoB,EAAEJ,OAAe,KAAK;IACxDH,cAAc,CAACO,KAAK,EAAEJ,OAAO,CAAC,CAC3BW,IAAI,CAAEC,CAAC,IAAK;MACXd,KAAK,CAAC,UAAU,CAAC;MACjB;IACF,CAAC,CAAC,CACDa,IAAI,CAAEC,CAAC,IAAK;MACXH,kBAAkB,CAAEI,IAAI,IAAK,CAACA,IAAI,CAAC;MACnCN,eAAe,CAACH,KAAK,CAAE,CAAC,CAAC;IAC3B,CAAC,CAAC,CACDU,KAAK,CAAEF,CAAC,IAAKG,OAAO,CAACC,GAAG,CAACJ,CAAC,CAAC,CAAC;EACjC,CAAC;EAED,oBACE;IAAK,SAAS,EAAEjB,MAAM,CAACsB,OAAQ;IAAA,wBAC7B;MAAK,SAAS,EAAEtB,MAAM,CAACM,IAAK;MAAA,UAAEA;IAAI;MAAA;MAAA;MAAA;IAAA,QAAO,eACzC;MAAK,SAAS,EAAEN,MAAM,CAACO,SAAU;MAAA,UAAEA;IAAS;MAAA;MAAA;MAAA;IAAA,QAAO,eACnD;MAAK,SAAS,EAAEP,MAAM,CAACe,MAAO;MAAA,UAC3BF,eAAe,gBACd;QAAA,UAAG;MAAG;QAAA;QAAA;QAAA;MAAA,QAAI,gBAEV;QACE,OAAO,EAAE,MAAM;UACbE,MAAM,CAACN,KAAK,EAAEJ,OAAO,CAAC;QACxB,CAAE;QAAA,UACH;MAED;QAAA;QAAA;QAAA;MAAA;IACD;MAAA;MAAA;MAAA;IAAA,QACG;EAAA;IAAA;IAAA;IAAA;EAAA,QACF;AAEV;AAAC,GAxCuBD,WAAW;EAAA,QAMiBH,iBAAiB;AAAA;AAAA,KAN7CG,WAAW;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}