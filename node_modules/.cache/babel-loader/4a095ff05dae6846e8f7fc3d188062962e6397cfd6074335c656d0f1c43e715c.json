{"ast":null,"code":"var _jsxFileName = \"/Users/chaenniee/Documents/team10-web/toyproject/src/components/assignments/AssignmentPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport AssignmentBlock from \"./AssignmentBlock\";\nimport styles from \"./AssignmentPage.module.scss\";\nimport SubjectTemplate from \"../SubjectTemplate\";\nimport { useParams } from \"react-router-dom\";\nimport { apiAssignments, apiAssignmentScore } from \"../../lib/api\";\nimport { useSessionContext } from \"../../context/SessionContext\";\nimport { useSubjectContext } from \"../../context/SubjectContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AssignmentPage() {\n  _s();\n  const {\n    token\n  } = useSessionContext();\n  const {\n    curSubject\n  } = useSubjectContext();\n  const {\n    subjectName\n  } = useParams();\n  const [isCategorized, setIsCategorized] = useState(true);\n  // const [assignmentsByTime, setAssignmentsByTime] = useState<AssignmentInterface>({\n  //     assignments: []\n  // });\n  const [assignments, setAssignments] = useState([]);\n  const [userAssignments, setUserAssignments] = useState([]);\n  const [assignmentBlocks, setAssignmentBlocks] = useState([{\n    category: \"과제\",\n    assignments: []\n  }]);\n  const getAllAssignments = (token, class_id) => {\n    apiAssignments(token, class_id).then(r => {\n      console.log(\"succeed\");\n      setAssignments(r.data);\n    }).catch(r => console.log(\"fail\"));\n  };\n  const getAssignmentScore = (token, assignments) => {\n    setUserAssignments([]);\n    assignments.map(assignment => {\n      apiAssignmentScore(token, assignment.id).then(r => setUserAssignments(userAssignments.concat([{\n        assignment: assignment,\n        is_submitted: r.data.is_submitted,\n        is_graded: r.data.is_graded,\n        score: r.data.score\n      }]))).catch(r => console.log(r));\n    });\n  };\n  useEffect(() => {\n    if (token) {\n      curSubject && getAllAssignments(token, curSubject.id);\n      console.log(assignments);\n      curSubject && getAssignmentScore(token, assignments);\n      curSubject && setAssignmentBlocks([{\n        category: \"과제\",\n        assignments: userAssignments\n      }]);\n    }\n  }, [token, setAssignments, setAssignmentBlocks, setUserAssignments]);\n\n  // 테스트용 임시데이터\n  // const assignments: AssigmentBlockInterface[] = [\n  //     {\n  //         category: \"Exam\",\n  //         assignments: [\n  //             {\n  //                 assignment: {name: \"Exam1\", dueDate: \"2022년 12월 25일 23:59\", maxGrade: 90, weight: 30},\n  //                 isGraded: true,\n  //                 grade: 80,\n  //             },\n  //             {\n  //                 assignment: {name: \"Exam2\", dueDate: \"2023년 2월 1일 23:59\", maxGrade: 120, weight: 20},\n  //                 isGraded: false,\n  //                 grade: -1,\n  //             }\n  //         ]\n  //     },\n  //     {\n  //         category: \"Programming\",\n  //         assignments: [\n  //             {\n  //                 assignment: {name: \"토이프로젝트\", dueDate: \"2023년 2월 4일 23:59\", maxGrade: 100, weight: 50},\n  //                 isGraded: true,\n  //                 grade: 100,\n  //             }\n  //         ]\n  //     }\n  // ]\n\n  useEffect(() => {\n    // 마감일 순 정렬 알고리즘 (아직 Date format 확정이 안돼서 구현불가)\n  }, []);\n  return /*#__PURE__*/_jsxDEV(SubjectTemplate, {\n    subject: \"\\uC640\\uD50C\\uD559\\uAC1C\\uB860\",\n    page: \"\\uACFC\\uC81C\",\n    content: undefined,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.wrapper,\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: styles.header,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"\\uACFC\\uC81C \\uAC80\\uC0C9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: isCategorized ? undefined : styles.categorized,\n          onClick: () => setIsCategorized(!isCategorized),\n          children: \"\\uB9C8\\uAC10\\uC21C\\uC73C\\uB85C \\uBCF4\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: isCategorized ? styles.categorized : undefined,\n          onClick: () => setIsCategorized(!isCategorized),\n          children: \"\\uC720\\uD615\\uBCC4\\uB85C \\uBCF4\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this), assignmentBlocks.map(elem => /*#__PURE__*/_jsxDEV(AssignmentBlock, {\n        assignmentBlock: elem\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 52\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 9\n  }, this);\n}\n_s(AssignmentPage, \"tFZUNau+qeJfH0+WgauAR7MUm48=\", false, function () {\n  return [useSessionContext, useSubjectContext, useParams];\n});\n_c = AssignmentPage;\nvar _c;\n$RefreshReg$(_c, \"AssignmentPage\");","map":{"version":3,"names":["React","useEffect","useState","AssignmentBlock","styles","SubjectTemplate","useParams","apiAssignments","apiAssignmentScore","useSessionContext","useSubjectContext","AssignmentPage","token","curSubject","subjectName","isCategorized","setIsCategorized","assignments","setAssignments","userAssignments","setUserAssignments","assignmentBlocks","setAssignmentBlocks","category","getAllAssignments","class_id","then","r","console","log","data","catch","getAssignmentScore","map","assignment","id","concat","is_submitted","is_graded","score","undefined","wrapper","header","categorized","elem"],"sources":["/Users/chaenniee/Documents/team10-web/toyproject/src/components/assignments/AssignmentPage.tsx"],"sourcesContent":["import React, {useEffect, useState} from 'react';\nimport AssignmentBlock from \"./AssignmentBlock\";\nimport styles from \"./AssignmentPage.module.scss\";\nimport SubjectTemplate from \"../SubjectTemplate\";\nimport {useParams} from \"react-router-dom\";\nimport {AssignmentInterface, UserAssignmentInterface, AssignmentBlockInterface} from \"./AssignmentBlock\";\nimport {apiAssignments, apiAssignmentScore} from \"../../lib/api\";\nimport {useSessionContext} from \"../../context/SessionContext\";\nimport {useSubjectContext} from \"../../context/SubjectContext\";\n\nexport default function AssignmentPage() {\n\n    const {token} = useSessionContext();\n    const {curSubject} = useSubjectContext();\n    const {subjectName} = useParams<string>();\n    const [isCategorized, setIsCategorized] = useState(true);\n    // const [assignmentsByTime, setAssignmentsByTime] = useState<AssignmentInterface>({\n    //     assignments: []\n    // });\n    const [assignments, setAssignments] = useState<AssignmentInterface[]>([]);\n    const [userAssignments, setUserAssignments] = useState<UserAssignmentInterface[]>([]);\n    const [assignmentBlocks, setAssignmentBlocks] = useState<AssignmentBlockInterface[]>([\n        {\n            category: \"과제\",\n            assignments: [],\n        },\n    ])\n\n    const getAllAssignments = (token: string | null, class_id: number) => {\n        apiAssignments(token, class_id)\n            .then(r => {\n                console.log(\"succeed\");\n                setAssignments(r.data);\n            })\n            .catch(r => console.log(\"fail\"))\n    }\n\n    const getAssignmentScore = (token: string | null, assignments: AssignmentInterface[]) => {\n        setUserAssignments([]);\n        assignments.map(assignment => {\n            apiAssignmentScore(token, assignment.id)\n                .then(r => setUserAssignments(userAssignments.concat([{\n                    assignment: assignment,\n                    is_submitted: r.data.is_submitted,\n                    is_graded: r.data.is_graded,\n                    score: r.data.score\n                }])))\n                .catch(r => console.log(r));\n        })\n    }\n\n    useEffect(() => {\n        if (token) {\n            curSubject && getAllAssignments(token, curSubject.id);\n            console.log(assignments);\n            curSubject && getAssignmentScore(token, assignments);\n            curSubject && setAssignmentBlocks([{\n                category: \"과제\",\n                assignments: userAssignments,\n            }]);\n        }\n    }, [token, setAssignments, setAssignmentBlocks, setUserAssignments])\n\n    // 테스트용 임시데이터\n    // const assignments: AssigmentBlockInterface[] = [\n    //     {\n    //         category: \"Exam\",\n    //         assignments: [\n    //             {\n    //                 assignment: {name: \"Exam1\", dueDate: \"2022년 12월 25일 23:59\", maxGrade: 90, weight: 30},\n    //                 isGraded: true,\n    //                 grade: 80,\n    //             },\n    //             {\n    //                 assignment: {name: \"Exam2\", dueDate: \"2023년 2월 1일 23:59\", maxGrade: 120, weight: 20},\n    //                 isGraded: false,\n    //                 grade: -1,\n    //             }\n    //         ]\n    //     },\n    //     {\n    //         category: \"Programming\",\n    //         assignments: [\n    //             {\n    //                 assignment: {name: \"토이프로젝트\", dueDate: \"2023년 2월 4일 23:59\", maxGrade: 100, weight: 50},\n    //                 isGraded: true,\n    //                 grade: 100,\n    //             }\n    //         ]\n    //     }\n    // ]\n\n    useEffect(() => {\n        // 마감일 순 정렬 알고리즘 (아직 Date format 확정이 안돼서 구현불가)\n    }, [])\n\n    return (\n        <SubjectTemplate subject=\"와플학개론\" page=\"과제\" content={undefined}>\n            <div className={styles.wrapper}>\n                <header className={styles.header}>\n                    <input placeholder=\"과제 검색\"/>\n                    <button className={isCategorized ? undefined : styles.categorized}\n                            onClick={() => setIsCategorized(!isCategorized)}>마감순으로 보기\n                    </button>\n                    <button className={isCategorized ? styles.categorized : undefined}\n                            onClick={() => setIsCategorized(!isCategorized)}>유형별로 보기\n                    </button>\n                </header>\n                {\n                    assignmentBlocks.map((elem) => <AssignmentBlock assignmentBlock={elem}/>)\n                }\n            </div>\n        </SubjectTemplate>\n    )\n}\n\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAGC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AAChD,OAAOC,eAAe,MAAM,mBAAmB;AAC/C,OAAOC,MAAM,MAAM,8BAA8B;AACjD,OAAOC,eAAe,MAAM,oBAAoB;AAChD,SAAQC,SAAS,QAAO,kBAAkB;AAE1C,SAAQC,cAAc,EAAEC,kBAAkB,QAAO,eAAe;AAChE,SAAQC,iBAAiB,QAAO,8BAA8B;AAC9D,SAAQC,iBAAiB,QAAO,8BAA8B;AAAC;AAE/D,eAAe,SAASC,cAAc,GAAG;EAAA;EAErC,MAAM;IAACC;EAAK,CAAC,GAAGH,iBAAiB,EAAE;EACnC,MAAM;IAACI;EAAU,CAAC,GAAGH,iBAAiB,EAAE;EACxC,MAAM;IAACI;EAAW,CAAC,GAAGR,SAAS,EAAU;EACzC,MAAM,CAACS,aAAa,EAAEC,gBAAgB,CAAC,GAAGd,QAAQ,CAAC,IAAI,CAAC;EACxD;EACA;EACA;EACA,MAAM,CAACe,WAAW,EAAEC,cAAc,CAAC,GAAGhB,QAAQ,CAAwB,EAAE,CAAC;EACzE,MAAM,CAACiB,eAAe,EAAEC,kBAAkB,CAAC,GAAGlB,QAAQ,CAA4B,EAAE,CAAC;EACrF,MAAM,CAACmB,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGpB,QAAQ,CAA6B,CACjF;IACIqB,QAAQ,EAAE,IAAI;IACdN,WAAW,EAAE;EACjB,CAAC,CACJ,CAAC;EAEF,MAAMO,iBAAiB,GAAG,CAACZ,KAAoB,EAAEa,QAAgB,KAAK;IAClElB,cAAc,CAACK,KAAK,EAAEa,QAAQ,CAAC,CAC1BC,IAAI,CAACC,CAAC,IAAI;MACPC,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;MACtBX,cAAc,CAACS,CAAC,CAACG,IAAI,CAAC;IAC1B,CAAC,CAAC,CACDC,KAAK,CAACJ,CAAC,IAAIC,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC,CAAC;EACxC,CAAC;EAED,MAAMG,kBAAkB,GAAG,CAACpB,KAAoB,EAAEK,WAAkC,KAAK;IACrFG,kBAAkB,CAAC,EAAE,CAAC;IACtBH,WAAW,CAACgB,GAAG,CAACC,UAAU,IAAI;MAC1B1B,kBAAkB,CAACI,KAAK,EAAEsB,UAAU,CAACC,EAAE,CAAC,CACnCT,IAAI,CAACC,CAAC,IAAIP,kBAAkB,CAACD,eAAe,CAACiB,MAAM,CAAC,CAAC;QAClDF,UAAU,EAAEA,UAAU;QACtBG,YAAY,EAAEV,CAAC,CAACG,IAAI,CAACO,YAAY;QACjCC,SAAS,EAAEX,CAAC,CAACG,IAAI,CAACQ,SAAS;QAC3BC,KAAK,EAAEZ,CAAC,CAACG,IAAI,CAACS;MAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CACJR,KAAK,CAACJ,CAAC,IAAIC,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC,CAAC;IACnC,CAAC,CAAC;EACN,CAAC;EAED1B,SAAS,CAAC,MAAM;IACZ,IAAIW,KAAK,EAAE;MACPC,UAAU,IAAIW,iBAAiB,CAACZ,KAAK,EAAEC,UAAU,CAACsB,EAAE,CAAC;MACrDP,OAAO,CAACC,GAAG,CAACZ,WAAW,CAAC;MACxBJ,UAAU,IAAImB,kBAAkB,CAACpB,KAAK,EAAEK,WAAW,CAAC;MACpDJ,UAAU,IAAIS,mBAAmB,CAAC,CAAC;QAC/BC,QAAQ,EAAE,IAAI;QACdN,WAAW,EAAEE;MACjB,CAAC,CAAC,CAAC;IACP;EACJ,CAAC,EAAE,CAACP,KAAK,EAAEM,cAAc,EAAEI,mBAAmB,EAAEF,kBAAkB,CAAC,CAAC;;EAEpE;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEAnB,SAAS,CAAC,MAAM;IACZ;EAAA,CACH,EAAE,EAAE,CAAC;EAEN,oBACI,QAAC,eAAe;IAAC,OAAO,EAAC,gCAAO;IAAC,IAAI,EAAC,cAAI;IAAC,OAAO,EAAEuC,SAAU;IAAA,uBAC1D;MAAK,SAAS,EAAEpC,MAAM,CAACqC,OAAQ;MAAA,wBAC3B;QAAQ,SAAS,EAAErC,MAAM,CAACsC,MAAO;QAAA,wBAC7B;UAAO,WAAW,EAAC;QAAO;UAAA;UAAA;UAAA;QAAA,QAAE,eAC5B;UAAQ,SAAS,EAAE3B,aAAa,GAAGyB,SAAS,GAAGpC,MAAM,CAACuC,WAAY;UAC1D,OAAO,EAAE,MAAM3B,gBAAgB,CAAC,CAACD,aAAa,CAAE;UAAA,UAAC;QACzD;UAAA;UAAA;UAAA;QAAA,QAAS,eACT;UAAQ,SAAS,EAAEA,aAAa,GAAGX,MAAM,CAACuC,WAAW,GAAGH,SAAU;UAC1D,OAAO,EAAE,MAAMxB,gBAAgB,CAAC,CAACD,aAAa,CAAE;UAAA,UAAC;QACzD;UAAA;UAAA;UAAA;QAAA,QAAS;MAAA;QAAA;QAAA;QAAA;MAAA,QACJ,EAELM,gBAAgB,CAACY,GAAG,CAAEW,IAAI,iBAAK,QAAC,eAAe;QAAC,eAAe,EAAEA;MAAK;QAAA;QAAA;QAAA;MAAA,QAAE,CAAC;IAAA;MAAA;MAAA;MAAA;IAAA;EAE3E;IAAA;IAAA;IAAA;EAAA,QACQ;AAE1B;AAAC,GAxGuBjC,cAAc;EAAA,QAElBF,iBAAiB,EACZC,iBAAiB,EAChBJ,SAAS;AAAA;AAAA,KAJXK,cAAc;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}