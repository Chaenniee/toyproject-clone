{"ast":null,"code":"var _jsxFileName = \"/Users/chaenniee/Documents/team10-web/toyproject/src/components/assignments/AssignmentPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport AssignmentBlock from './AssignmentBlock';\nimport styles from './AssignmentPage.module.scss';\nimport SubjectTemplate from '../SubjectTemplate';\nimport { useParams } from 'react-router-dom';\nimport { apiAssignments, apiAssignmentScore } from '../../lib/api';\nimport { useSessionContext } from '../../context/SessionContext';\nimport { useSubjectContext } from '../../context/SubjectContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AssignmentPage() {\n  _s();\n  const {\n    token\n  } = useSessionContext();\n  const {\n    curSubject\n  } = useSubjectContext();\n  const {\n    subjectname\n  } = useParams();\n  const [isCategorized, setIsCategorized] = useState(true);\n  // const [assignmentsByTime, setAssignmentsByTime] = useState<AssignmentInterface>({\n  //     assignments: []\n  // });\n  const [assignments, setAssignments] = useState([]);\n  const [userAssignments, setUserAssignments] = useState([]);\n  const [assignmentBlocks, setAssignmentBlocks] = useState([{\n    category: '과제',\n    assignments: []\n  }]);\n  const getAllAssignments = (token, class_id) => {\n    apiAssignments(token, class_id).then(r => {\n      setAssignments(r.data);\n    }).catch(r => console.log(r));\n  };\n  const getAssignmentScore = (token, assignments) => {\n    setUserAssignments([]);\n    assignments.map(assignment => {\n      apiAssignmentScore(token, assignment.id).then(r => {\n        console.log(\"succeed\");\n        setUserAssignments(userAssignments.concat([{\n          assignment: assignment,\n          is_submitted: r.data.is_submitted,\n          is_graded: r.data.is_graded,\n          score: r.data.score\n        }]));\n      }).catch(r => console.log(\"fail\"));\n    });\n  };\n  useEffect(() => {\n    if (token) {\n      curSubject && getAllAssignments(token, curSubject.id);\n      curSubject && getAssignmentScore(token, assignments);\n      curSubject && setAssignmentBlocks([{\n        category: '과제',\n        assignments: userAssignments\n      }]);\n    }\n    console.log(assignments);\n    console.log(userAssignments);\n    console.log(assignmentBlocks);\n  }, [token, setAssignments, setAssignmentBlocks, setUserAssignments]);\n  return /*#__PURE__*/_jsxDEV(SubjectTemplate, {\n    subject: subjectname,\n    page: \"\\uACFC\\uC81C\",\n    content: undefined,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.wrapper,\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: styles.header,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"\\uACFC\\uC81C \\uAC80\\uC0C9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: isCategorized ? undefined : styles.categorized,\n          onClick: () => setIsCategorized(!isCategorized),\n          children: \"\\uB9C8\\uAC10\\uC21C\\uC73C\\uB85C \\uBCF4\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: isCategorized ? styles.categorized : undefined,\n          onClick: () => setIsCategorized(!isCategorized),\n          children: \"\\uC720\\uD615\\uBCC4\\uB85C \\uBCF4\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this), assignmentBlocks.map(elem => /*#__PURE__*/_jsxDEV(AssignmentBlock, {\n        assignmentBlock: elem\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 21\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 9\n  }, this);\n}\n_s(AssignmentPage, \"5oCWNzc+yx+pUSZq4gnOyYWJKsk=\", false, function () {\n  return [useSessionContext, useSubjectContext, useParams];\n});\n_c = AssignmentPage;\nvar _c;\n$RefreshReg$(_c, \"AssignmentPage\");","map":{"version":3,"names":["React","useEffect","useState","AssignmentBlock","styles","SubjectTemplate","useParams","apiAssignments","apiAssignmentScore","useSessionContext","useSubjectContext","AssignmentPage","token","curSubject","subjectname","isCategorized","setIsCategorized","assignments","setAssignments","userAssignments","setUserAssignments","assignmentBlocks","setAssignmentBlocks","category","getAllAssignments","class_id","then","r","data","catch","console","log","getAssignmentScore","map","assignment","id","concat","is_submitted","is_graded","score","undefined","wrapper","header","categorized","elem"],"sources":["/Users/chaenniee/Documents/team10-web/toyproject/src/components/assignments/AssignmentPage.tsx"],"sourcesContent":["import React, {useEffect, useState} from 'react';\nimport AssignmentBlock from './AssignmentBlock';\nimport styles from './AssignmentPage.module.scss';\nimport SubjectTemplate from '../SubjectTemplate';\nimport {useParams} from 'react-router-dom';\nimport {\n    AssignmentInterface,\n    UserAssignmentInterface,\n    AssignmentBlockInterface,\n} from './AssignmentBlock';\nimport {apiAssignments, apiAssignmentScore} from '../../lib/api';\nimport {useSessionContext} from '../../context/SessionContext';\nimport {useSubjectContext} from '../../context/SubjectContext';\n\nexport default function AssignmentPage() {\n    const {token} = useSessionContext();\n    const {curSubject} = useSubjectContext();\n    const {subjectname} = useParams();\n    const [isCategorized, setIsCategorized] = useState(true);\n    // const [assignmentsByTime, setAssignmentsByTime] = useState<AssignmentInterface>({\n    //     assignments: []\n    // });\n    const [assignments, setAssignments] = useState<AssignmentInterface[]>([]);\n    const [userAssignments, setUserAssignments] = useState<UserAssignmentInterface[]>([]);\n    const [assignmentBlocks, setAssignmentBlocks] = useState<AssignmentBlockInterface[]>([\n        {\n            category: '과제',\n            assignments: [],\n        },\n    ]);\n\n    const getAllAssignments = (token: string | null, class_id: number) => {\n        apiAssignments(token, class_id)\n            .then((r) => {\n                setAssignments(r.data);\n            })\n            .catch((r) => console.log(r));\n    };\n\n    const getAssignmentScore = (\n        token: string | null,\n        assignments: AssignmentInterface[]\n    ) => {\n        setUserAssignments([]);\n        assignments.map((assignment) => {\n            apiAssignmentScore(token, assignment.id)\n                .then((r) => {\n                        console.log(\"succeed\");\n                        setUserAssignments(\n                            userAssignments.concat([\n                                {\n                                    assignment: assignment,\n                                    is_submitted: r.data.is_submitted,\n                                    is_graded: r.data.is_graded,\n                                    score: r.data.score,\n                                },\n                            ])\n                        )\n                    }\n                )\n                .catch((r) => console.log(\"fail\"));\n        });\n    };\n\n    useEffect(() => {\n        if (token) {\n            curSubject && getAllAssignments(token, curSubject.id);\n            curSubject && getAssignmentScore(token, assignments);\n            curSubject &&\n            setAssignmentBlocks([\n                {\n                    category: '과제',\n                    assignments: userAssignments,\n                },\n            ]);\n        }\n        console.log(assignments);\n        console.log(userAssignments);\n        console.log(assignmentBlocks);\n    }, [token, setAssignments, setAssignmentBlocks, setUserAssignments]);\n\n    return (\n        <SubjectTemplate subject={subjectname as string} page='과제' content={undefined}>\n            <div className={styles.wrapper}>\n                <header className={styles.header}>\n                    <input placeholder='과제 검색'/>\n                    <button\n                        className={isCategorized ? undefined : styles.categorized}\n                        onClick={() => setIsCategorized(!isCategorized)}\n                    >\n                        마감순으로 보기\n                    </button>\n                    <button\n                        className={isCategorized ? styles.categorized : undefined}\n                        onClick={() => setIsCategorized(!isCategorized)}\n                    >\n                        유형별로 보기\n                    </button>\n                </header>\n                {assignmentBlocks.map((elem) => (\n                    <AssignmentBlock assignmentBlock={elem}/>\n                ))}\n            </div>\n        </SubjectTemplate>\n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}