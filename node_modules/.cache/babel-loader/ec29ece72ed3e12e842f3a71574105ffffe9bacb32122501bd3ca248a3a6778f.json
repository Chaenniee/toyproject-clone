{"ast":null,"code":"var _jsxFileName = \"/Users/chaenniee/Documents/team10-web/toyproject/src/components/assignments/AssignmentPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport AssignmentBlock from './AssignmentBlock';\nimport styles from './AssignmentPage.module.scss';\nimport SubjectTemplate from '../SubjectTemplate';\nimport { useParams } from 'react-router-dom';\nimport { apiAssignments, apiAssignmentScore } from '../../lib/api';\nimport { useSessionContext } from '../../context/SessionContext';\nimport { useSubjectContext } from '../../context/SubjectContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AssignmentPage() {\n  _s();\n  const {\n    token\n  } = useSessionContext();\n  const {\n    curSubject\n  } = useSubjectContext();\n  const {\n    subjectName\n  } = useParams();\n  const [isCategorized, setIsCategorized] = useState(true);\n  // const [assignmentsByTime, setAssignmentsByTime] = useState<AssignmentInterface>({\n  //     assignments: []\n  // });\n  const [assignments, setAssignments] = useState([]);\n  const [userAssignments, setUserAssignments] = useState([]);\n  const [assignmentBlocks, setAssignmentBlocks] = useState([{\n    category: '과제',\n    assignments: []\n  }]);\n  const getAllAssignments = (token, class_id) => {\n    apiAssignments(token, class_id).then(r => {\n      console.log('succeed');\n      setAssignments(r.data);\n    }).catch(r => console.log('fail'));\n  };\n  const getAssignmentScore = (token, assignments) => {\n    setUserAssignments([]);\n    assignments.map(assignment => {\n      apiAssignmentScore(token, assignment.id).then(r => setUserAssignments(userAssignments.concat([{\n        assignment: assignment,\n        is_submitted: r.data.is_submitted,\n        is_graded: r.data.is_graded,\n        score: r.data.score\n      }]))).catch(r => console.log(r));\n    });\n  };\n  useEffect(() => {\n    if (token) {\n      curSubject && getAllAssignments(token, curSubject.id);\n      console.log(assignments);\n      curSubject && getAssignmentScore(token, assignments);\n      curSubject && setAssignmentBlocks([{\n        category: '과제',\n        assignments: userAssignments\n      }]);\n    }\n  }, [token, setAssignments, setAssignmentBlocks, setUserAssignments]);\n  useEffect(() => {\n    // 마감일 순 정렬 알고리즘 (아직 Date format 확정이 안돼서 구현불가)\n  }, []);\n  return /*#__PURE__*/_jsxDEV(SubjectTemplate, {\n    subject: \"\\uC640\\uD50C\\uD559\\uAC1C\\uB860\",\n    page: \"\\uACFC\\uC81C\",\n    content: undefined,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.wrapper,\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: styles.header,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"\\uACFC\\uC81C \\uAC80\\uC0C9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: isCategorized ? undefined : styles.categorized,\n          onClick: () => setIsCategorized(!isCategorized),\n          children: \"\\uB9C8\\uAC10\\uC21C\\uC73C\\uB85C \\uBCF4\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: isCategorized ? styles.categorized : undefined,\n          onClick: () => setIsCategorized(!isCategorized),\n          children: \"\\uC720\\uD615\\uBCC4\\uB85C \\uBCF4\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), assignmentBlocks.map(elem => /*#__PURE__*/_jsxDEV(AssignmentBlock, {\n        assignmentBlock: elem\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n}\n_s(AssignmentPage, \"KzQ41FBK/5PKHzcrXIpHecu5Ceg=\", false, function () {\n  return [useSessionContext, useSubjectContext, useParams];\n});\n_c = AssignmentPage;\nvar _c;\n$RefreshReg$(_c, \"AssignmentPage\");","map":{"version":3,"names":["React","useEffect","useState","AssignmentBlock","styles","SubjectTemplate","useParams","apiAssignments","apiAssignmentScore","useSessionContext","useSubjectContext","AssignmentPage","token","curSubject","subjectName","isCategorized","setIsCategorized","assignments","setAssignments","userAssignments","setUserAssignments","assignmentBlocks","setAssignmentBlocks","category","getAllAssignments","class_id","then","r","console","log","data","catch","getAssignmentScore","map","assignment","id","concat","is_submitted","is_graded","score","undefined","wrapper","header","categorized","elem"],"sources":["/Users/chaenniee/Documents/team10-web/toyproject/src/components/assignments/AssignmentPage.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport AssignmentBlock from './AssignmentBlock';\nimport styles from './AssignmentPage.module.scss';\nimport SubjectTemplate from '../SubjectTemplate';\nimport { useParams } from 'react-router-dom';\nimport {\n  AssignmentInterface,\n  UserAssignmentInterface,\n  AssignmentBlockInterface,\n} from './AssignmentBlock';\nimport { apiAssignments, apiAssignmentScore } from '../../lib/api';\nimport { useSessionContext } from '../../context/SessionContext';\nimport { useSubjectContext } from '../../context/SubjectContext';\n\nexport default function AssignmentPage() {\n  const { token } = useSessionContext();\n  const { curSubject } = useSubjectContext();\n  const { subjectName } = useParams<string>();\n  const [isCategorized, setIsCategorized] = useState(true);\n  // const [assignmentsByTime, setAssignmentsByTime] = useState<AssignmentInterface>({\n  //     assignments: []\n  // });\n  const [assignments, setAssignments] = useState<AssignmentInterface[]>([]);\n  const [userAssignments, setUserAssignments] = useState<\n    UserAssignmentInterface[]\n  >([]);\n  const [assignmentBlocks, setAssignmentBlocks] = useState<\n    AssignmentBlockInterface[]\n  >([\n    {\n      category: '과제',\n      assignments: [],\n    },\n  ]);\n\n  const getAllAssignments = (token: string | null, class_id: number) => {\n    apiAssignments(token, class_id)\n      .then((r) => {\n        console.log('succeed');\n        setAssignments(r.data);\n      })\n      .catch((r) => console.log('fail'));\n  };\n\n  const getAssignmentScore = (\n    token: string | null,\n    assignments: AssignmentInterface[]\n  ) => {\n    setUserAssignments([]);\n    assignments.map((assignment) => {\n      apiAssignmentScore(token, assignment.id)\n        .then((r) =>\n          setUserAssignments(\n            userAssignments.concat([\n              {\n                assignment: assignment,\n                is_submitted: r.data.is_submitted,\n                is_graded: r.data.is_graded,\n                score: r.data.score,\n              },\n            ])\n          )\n        )\n        .catch((r) => console.log(r));\n    });\n  };\n\n  useEffect(() => {\n    if (token) {\n      curSubject && getAllAssignments(token, curSubject.id);\n      console.log(assignments);\n      curSubject && getAssignmentScore(token, assignments);\n      curSubject &&\n        setAssignmentBlocks([\n          {\n            category: '과제',\n            assignments: userAssignments,\n          },\n        ]);\n    }\n  }, [token, setAssignments, setAssignmentBlocks, setUserAssignments]);\n\n  useEffect(() => {\n    // 마감일 순 정렬 알고리즘 (아직 Date format 확정이 안돼서 구현불가)\n  }, []);\n\n  return (\n    <SubjectTemplate subject='와플학개론' page='과제' content={undefined}>\n      <div className={styles.wrapper}>\n        <header className={styles.header}>\n          <input placeholder='과제 검색' />\n          <button\n            className={isCategorized ? undefined : styles.categorized}\n            onClick={() => setIsCategorized(!isCategorized)}\n          >\n            마감순으로 보기\n          </button>\n          <button\n            className={isCategorized ? styles.categorized : undefined}\n            onClick={() => setIsCategorized(!isCategorized)}\n          >\n            유형별로 보기\n          </button>\n        </header>\n        {assignmentBlocks.map((elem) => (\n          <AssignmentBlock assignmentBlock={elem} />\n        ))}\n      </div>\n    </SubjectTemplate>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}