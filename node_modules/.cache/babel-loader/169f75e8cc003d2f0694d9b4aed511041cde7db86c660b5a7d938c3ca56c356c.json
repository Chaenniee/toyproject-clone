{"ast":null,"code":"var _jsxFileName = \"/Users/chaenniee/Documents/team10-web/toyproject/src/context/SubjectContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState } from \"react\";\nimport { apiGetSubjectInfo } from \"../lib/api\";\nimport { useSessionContext } from \"../context/SessionContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SubjectContext = /*#__PURE__*/createContext({});\n\n//default 붙이면 prettier 이상하게 적용됨\nexport function SubjectProvider(_ref) {\n  _s();\n  let {\n    children\n  } = _ref;\n  const {\n    token,\n    user,\n    getRefreshToken\n  } = useSessionContext();\n\n  //페이지네이션에 사용해야겠다.\n  const [subjects, setSubjects] = useState(undefined);\n  const [curSubject, setCurSubject] = useState(undefined);\n  const [nextApi, setNextApi] = useState(\"\");\n  const [previousApi, setPreviousApi] = useState(\"\");\n\n  // const getSubjects = async (token: string | null, page: number | null) => {\n  //   try {\n  //     const res = await apiGetSubjects(token, page);\n  //     setNextApi(res.data.next && res.data.next.match(/page=([^&]+)/)[1]);\n  //     setPreviousApi(\n  //       res.data.previous && res.data.previous.match(/page=([^&]+)/)[1]\n  //     );\n  //     setSubjects(res.data.results);\n  //   } catch (err) {\n  //     console.log(err);\n  //   }\n  // };\n\n  // useEffect(() => {\n  //   if (token) getSubjects(token, '');\n  // }, [token]);\n\n  const mySubjects = user === null || user === void 0 ? void 0 : user.classes;\n  const handleClick = subject => {\n    setCurSubject(subject);\n  };\n  const enrollClass = () => {};\n  const dropClass = () => {};\n\n  //subjectTemplate에서 사용\n  const getSubjectInfo = async id => {\n    const localRefreshToken = localStorage.getItem(\"refresh\");\n    const resToken = await getRefreshToken(localRefreshToken ? localRefreshToken : \"temp\");\n    const res = await apiGetSubjectInfo(resToken.data.access, id);\n    return res;\n  };\n  return /*#__PURE__*/_jsxDEV(SubjectContext.Provider, {\n    value: {\n      subjects,\n      mySubjects,\n      curSubject,\n      handleClick,\n      // getSubjects,\n      nextApi,\n      previousApi,\n      getSubjectInfo\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n}\n_s(SubjectProvider, \"+mlAiCzjpD7kq6oecQMVw9wAFew=\", false, function () {\n  return [useSessionContext];\n});\n_c = SubjectProvider;\nexport const useSubjectContext = () => {\n  _s2();\n  return useContext(SubjectContext);\n};\n_s2(useSubjectContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"SubjectProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","apiGetSubjectInfo","useSessionContext","SubjectContext","SubjectProvider","children","token","user","getRefreshToken","subjects","setSubjects","undefined","curSubject","setCurSubject","nextApi","setNextApi","previousApi","setPreviousApi","mySubjects","classes","handleClick","subject","enrollClass","dropClass","getSubjectInfo","id","localRefreshToken","localStorage","getItem","resToken","res","data","access","useSubjectContext"],"sources":["/Users/chaenniee/Documents/team10-web/toyproject/src/context/SubjectContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useEffect, useState } from \"react\";\nimport { apiGetSubjectInfo, apiGetSubjects } from \"../lib/api\";\nimport { useSessionContext } from \"../context/SessionContext\";\nimport { SubjectType } from \"../lib/types\";\nimport { AxiosResponse } from \"axios\";\n\ntype SubjectContextType = {\n  subjects: SubjectType[] | undefined;\n  mySubjects: SubjectType[] | undefined;\n  curSubject: SubjectType | undefined;\n  handleClick: (subject: SubjectType) => void;\n  getSubjects: (token: string | null, page: number | null) => void;\n  nextApi: string | null;\n  previousApi: string | null;\n  getSubjectInfo: (id: number) => Promise<AxiosResponse<any, any>>;\n};\n\nconst SubjectContext = createContext<SubjectContextType>(\n  {} as SubjectContextType\n);\n\n//default 붙이면 prettier 이상하게 적용됨\nexport function SubjectProvider({ children }: { children: React.ReactNode }) {\n  const { token, user, getRefreshToken } = useSessionContext();\n\n  //페이지네이션에 사용해야겠다.\n  const [subjects, setSubjects] = useState<SubjectType[] | undefined>(\n    undefined\n  );\n\n  const [curSubject, setCurSubject] = useState<SubjectType | undefined>(\n    undefined\n  );\n  const [nextApi, setNextApi] = useState(\"\");\n  const [previousApi, setPreviousApi] = useState(\"\");\n\n  // const getSubjects = async (token: string | null, page: number | null) => {\n  //   try {\n  //     const res = await apiGetSubjects(token, page);\n  //     setNextApi(res.data.next && res.data.next.match(/page=([^&]+)/)[1]);\n  //     setPreviousApi(\n  //       res.data.previous && res.data.previous.match(/page=([^&]+)/)[1]\n  //     );\n  //     setSubjects(res.data.results);\n  //   } catch (err) {\n  //     console.log(err);\n  //   }\n  // };\n\n  // useEffect(() => {\n  //   if (token) getSubjects(token, '');\n  // }, [token]);\n\n  const mySubjects = user?.classes;\n\n  const handleClick = (subject: SubjectType) => {\n    setCurSubject(subject);\n  };\n\n  const enrollClass = () => {};\n\n  const dropClass = () => {};\n\n  //subjectTemplate에서 사용\n  const getSubjectInfo = async (id: number) => {\n    const localRefreshToken = localStorage.getItem(\"refresh\");\n    const resToken = await getRefreshToken(\n      localRefreshToken ? localRefreshToken : \"temp\"\n    );\n    const res = await apiGetSubjectInfo(resToken.data.access, id);\n    return res;\n  };\n\n  return (\n    <SubjectContext.Provider\n      value={{\n        subjects,\n        mySubjects,\n        curSubject,\n        handleClick,\n        // getSubjects,\n        nextApi,\n        previousApi,\n        getSubjectInfo,\n      }}\n    >\n      {children}\n    </SubjectContext.Provider>\n  );\n}\n\nexport const useSubjectContext = () => useContext(SubjectContext);\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAaC,QAAQ,QAAQ,OAAO;AAC7E,SAASC,iBAAiB,QAAwB,YAAY;AAC9D,SAASC,iBAAiB,QAAQ,2BAA2B;AAAC;AAe9D,MAAMC,cAAc,gBAAGL,aAAa,CAClC,CAAC,CAAC,CACH;;AAED;AACA,OAAO,SAASM,eAAe,OAA8C;EAAA;EAAA,IAA7C;IAAEC;EAAwC,CAAC;EACzE,MAAM;IAAEC,KAAK;IAAEC,IAAI;IAAEC;EAAgB,CAAC,GAAGN,iBAAiB,EAAE;;EAE5D;EACA,MAAM,CAACO,QAAQ,EAAEC,WAAW,CAAC,GAAGV,QAAQ,CACtCW,SAAS,CACV;EAED,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGb,QAAQ,CAC1CW,SAAS,CACV;EACD,MAAM,CAACG,OAAO,EAAEC,UAAU,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACgB,WAAW,EAAEC,cAAc,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;;EAElD;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA,MAAMkB,UAAU,GAAGX,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEY,OAAO;EAEhC,MAAMC,WAAW,GAAIC,OAAoB,IAAK;IAC5CR,aAAa,CAACQ,OAAO,CAAC;EACxB,CAAC;EAED,MAAMC,WAAW,GAAG,MAAM,CAAC,CAAC;EAE5B,MAAMC,SAAS,GAAG,MAAM,CAAC,CAAC;;EAE1B;EACA,MAAMC,cAAc,GAAG,MAAOC,EAAU,IAAK;IAC3C,MAAMC,iBAAiB,GAAGC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC;IACzD,MAAMC,QAAQ,GAAG,MAAMrB,eAAe,CACpCkB,iBAAiB,GAAGA,iBAAiB,GAAG,MAAM,CAC/C;IACD,MAAMI,GAAG,GAAG,MAAM7B,iBAAiB,CAAC4B,QAAQ,CAACE,IAAI,CAACC,MAAM,EAAEP,EAAE,CAAC;IAC7D,OAAOK,GAAG;EACZ,CAAC;EAED,oBACE,QAAC,cAAc,CAAC,QAAQ;IACtB,KAAK,EAAE;MACLrB,QAAQ;MACRS,UAAU;MACVN,UAAU;MACVQ,WAAW;MACX;MACAN,OAAO;MACPE,WAAW;MACXQ;IACF,CAAE;IAAA,UAEDnB;EAAQ;IAAA;IAAA;IAAA;EAAA,QACe;AAE9B;AAAC,GAnEeD,eAAe;EAAA,QACYF,iBAAiB;AAAA;AAAA,KAD5CE,eAAe;AAqE/B,OAAO,MAAM6B,iBAAiB,GAAG;EAAA;EAAA,OAAMlC,UAAU,CAACI,cAAc,CAAC;AAAA;AAAC,IAArD8B,iBAAiB;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}