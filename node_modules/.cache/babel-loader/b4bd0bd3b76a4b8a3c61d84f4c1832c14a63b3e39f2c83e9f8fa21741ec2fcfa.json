{"ast":null,"code":"var _jsxFileName = \"/Users/chaenniee/Documents/team10-web/toyproject/src/components/grades/GradesPage.tsx\",\n  _s = $RefreshSig$();\nimport SubjectTemplate from '../SubjectTemplate';\nimport styles from './GradesPage.module.scss';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { useEffect, useState } from 'react';\nimport { useSessionContext } from '../../context/SessionContext';\nimport { apiAssignments, apiAssignmentTotalScore } from '../../lib/api';\nimport dayjs from 'dayjs';\nimport axios from 'axios';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function GradesPage() {\n  _s();\n  const {\n    subjectid\n  } = useParams();\n  const {\n    user\n  } = useSessionContext();\n  const {\n    token,\n    getRefreshToken\n  } = useSessionContext();\n  const [assignments, setAssignments] = useState([]);\n  const [scores, setScores] = useState([]);\n  const id = Number(subjectid);\n  const navigate = useNavigate();\n  useEffect(() => {\n    (async () => {\n      try {\n        const localRefreshToken = localStorage.getItem('refresh');\n        const resToken = await getRefreshToken(localRefreshToken ? localRefreshToken : 'temp');\n        const assignRes = await apiAssignments(resToken.data.access, id); //token을 이전거를 사용하게 된다.\n        setAssignments(assignRes.data);\n        const scoreRes = await apiAssignmentTotalScore(resToken.data.access, id);\n        setScores(scoreRes.data);\n      } catch (e) {\n        if (axios.isAxiosError(e)) {\n          var _e$response;\n          toast((_e$response = e.response) === null || _e$response === void 0 ? void 0 : _e$response.data.message);\n          navigate('/login');\n        } else {\n          console.log(e);\n        }\n      }\n    })();\n  }, [subjectid]);\n  return /*#__PURE__*/_jsxDEV(SubjectTemplate, {\n    subject: subjectid,\n    page: \"\\uC131\\uC801\",\n    content: `${user === null || user === void 0 ? void 0 : user.username} (${user === null || user === void 0 ? void 0 : user.student_id})`,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: styles.h1,\n      children: `${user === null || user === void 0 ? void 0 : user.username} (${user === null || user === void 0 ? void 0 : user.student_id})의 성적`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      className: styles.table,\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            className: styles.name,\n            children: \"\\uC774\\uB984\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: styles.dueDate,\n            children: \"\\uB9C8\\uAC10\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: styles.status,\n            children: \"\\uC0C1\\uD0DC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: styles.grade,\n            children: \"\\uC810\\uC218\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: styles.maxGrade,\n            children: \"\\uCD1D\\uC810\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: assignments && assignments.map((assignment, assignmentIdx) => {\n          const timestamp = Number(assignment.due_date);\n          const date = dayjs(timestamp).format('YYYY-MM-DD');\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              className: styles.name,\n              children: assignment.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: styles.dueDate,\n              children: date\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: styles.status,\n              children: scores.map((score, scoreIdx) => {\n                if (scoreIdx === assignmentIdx) {\n                  return score.is_submitted ? '제출됨' : '제출되지 않음';\n                }\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: styles.grade,\n              children: scores.map((score, scoreIdx) => {\n                if (scoreIdx === assignmentIdx) {\n                  return score.score;\n                }\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: styles.maxGrade,\n              children: assignment.max_grade\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 19\n            }, this)]\n          }, assignment.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\n_s(GradesPage, \"kzYrLZJac5xj0Q/diCV4stF0TnE=\", false, function () {\n  return [useParams, useSessionContext, useSessionContext, useNavigate];\n});\n_c = GradesPage;\nvar _c;\n$RefreshReg$(_c, \"GradesPage\");","map":{"version":3,"names":["SubjectTemplate","styles","useNavigate","useParams","useEffect","useState","useSessionContext","apiAssignments","apiAssignmentTotalScore","dayjs","axios","toast","GradesPage","subjectid","user","token","getRefreshToken","assignments","setAssignments","scores","setScores","id","Number","navigate","localRefreshToken","localStorage","getItem","resToken","assignRes","data","access","scoreRes","e","isAxiosError","response","message","console","log","username","student_id","h1","table","name","dueDate","status","grade","maxGrade","map","assignment","assignmentIdx","timestamp","due_date","date","format","score","scoreIdx","is_submitted","max_grade"],"sources":["/Users/chaenniee/Documents/team10-web/toyproject/src/components/grades/GradesPage.tsx"],"sourcesContent":["import SubjectTemplate from '../SubjectTemplate';\nimport styles from './GradesPage.module.scss';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { useEffect, useState } from 'react';\nimport { useSessionContext } from '../../context/SessionContext';\nimport {\n  apiAssignments,\n  apiAssignmentScore,\n  apiAssignmentTotalScore,\n} from '../../lib/api';\nimport { AssignmentInterface, UserScoreInterface } from '../../lib/types';\nimport dayjs from 'dayjs';\nimport axios from 'axios';\nimport { toast } from 'react-toastify';\n\nexport default function GradesPage() {\n  const { subjectid } = useParams();\n\n  const { user } = useSessionContext();\n  const { token, getRefreshToken } = useSessionContext();\n\n  const [assignments, setAssignments] = useState<AssignmentInterface[]>([]);\n  const [scores, setScores] = useState<UserScoreInterface[]>([]);\n\n  const id = Number(subjectid);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const localRefreshToken = localStorage.getItem('refresh');\n        const resToken = await getRefreshToken(\n          localRefreshToken ? localRefreshToken : 'temp'\n        );\n        const assignRes = await apiAssignments(resToken.data.access, id); //token을 이전거를 사용하게 된다.\n        setAssignments(assignRes.data);\n        const scoreRes = await apiAssignmentTotalScore(\n          resToken.data.access,\n          id\n        );\n        setScores(scoreRes.data);\n      } catch (e) {\n        if (axios.isAxiosError(e)) {\n          toast(e.response?.data.message);\n          navigate('/login');\n        } else {\n          console.log(e);\n        }\n      }\n    })();\n  }, [subjectid]);\n\n  return (\n    <SubjectTemplate\n      subject={subjectid as string}\n      page='성적'\n      content={`${user?.username} (${user?.student_id})`}\n    >\n      <h1\n        className={styles.h1}\n      >{`${user?.username} (${user?.student_id})의 성적`}</h1>\n\n      <table className={styles.table}>\n        <thead>\n          <tr>\n            <th className={styles.name}>이름</th>\n            <th className={styles.dueDate}>마감</th>\n            <th className={styles.status}>상태</th>\n            <th className={styles.grade}>점수</th>\n            <th className={styles.maxGrade}>총점</th>\n          </tr>\n        </thead>\n        <tbody>\n          {assignments &&\n            assignments.map((assignment, assignmentIdx) => {\n              const timestamp = Number(assignment.due_date);\n              const date = dayjs(timestamp).format('YYYY-MM-DD');\n              return (\n                <tr key={assignment.id}>\n                  <td className={styles.name}>{assignment.name}</td>\n                  <td className={styles.dueDate}>{date}</td>\n                  <td className={styles.status}>\n                    {scores.map((score, scoreIdx) => {\n                      if (scoreIdx === assignmentIdx) {\n                        return score.is_submitted ? '제출됨' : '제출되지 않음';\n                      }\n                    })}\n                  </td>\n                  <td className={styles.grade}>\n                    {scores.map((score, scoreIdx) => {\n                      if (scoreIdx === assignmentIdx) {\n                        return score.score;\n                      }\n                    })}\n                  </td>\n                  <td className={styles.maxGrade}>{assignment.max_grade}</td>\n                </tr>\n              );\n            })}\n        </tbody>\n      </table>\n    </SubjectTemplate>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}